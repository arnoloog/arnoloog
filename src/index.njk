---
layout: layouts/base.njk
title: ARNOLOOG
---

<section class="home">
  <div class="home-grid">
    {% for roll in photos.rolls %}
      {# binnen elke roll: omkeren zodat 01 onderaan zit #}
      {% for item in roll.grid | reverse %}
        {% if item.isTrigger %}
          <a href="/rolls/{{ roll.name }}/" class="grid-item grid-item--trigger">
            <img src="{{ item.src }}" loading="lazy" alt="">
          </a>
        {% else %}
          <div class="grid-item">
            <img src="{{ item.src }}" loading="lazy" alt="">
          </div>
        {% endif %}
      {% endfor %}
    {% endfor %}
  </div>

  <div class="fast-scroll-thumb" aria-label="fast scroll"></div>
</section>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const grid = document.querySelector(".home-grid");
  if (!grid) return;

  // respect reduced motion
  if (window.matchMedia("(prefers-reduced-motion: reduce)").matches) return;

  const items = Array.from(grid.querySelectorAll(".grid-item, .grid-item--trigger"));
  if (!items.length) return;

  // stapgrootte (voelt als "puzzel move": 1-2 stappen)
  const first = items[0].getBoundingClientRect();
  const step = Math.max(14, Math.round(first.width * 0.20));

  const n = items.length;
  const easeInQuad = (t) => t * t; // traag begin -> sneller einde

  // shuffle offsets + timing per tile
  items.forEach((el, i) => {
    const t = n === 1 ? 1 : i / (n - 1);
    const accel = easeInQuad(t);

    // alleen horizontaal OF verticaal, 1 of 2 stappen
    const axis = Math.random() < 0.5 ? "x" : "y";
    const steps = (Math.random() < 0.65 ? 1 : 2) * (Math.random() < 0.5 ? -1 : 1);

    const sx = axis === "x" ? steps * step : 0;
    const sy = axis === "y" ? steps * step : 0;

    el.style.setProperty("--sx", `${sx}px`);
    el.style.setProperty("--sy", `${sy}px`);

    // timing: begin trager, einde sneller
    const delay = 120 + Math.round(720 * accel);      // gaps groter in het begin
    const dur   = 980 - Math.round(560 * t);          // duur korter naar het einde

    el.style.setProperty("--delay", `${delay}ms`);
    el.style.setProperty("--dur", `${dur}ms`);
  });

  // start puzzle solve
  grid.classList.add("is-puzzle");

  // cleanup na afloop (zodat site daarna "stil" is)
  window.setTimeout(() => {
    grid.classList.remove("is-puzzle");
    items.forEach(el => {
      el.style.removeProperty("--sx");
      el.style.removeProperty("--sy");
      el.style.removeProperty("--delay");
      el.style.removeProperty("--dur");
    });
  }, 1800);
});
</script>
